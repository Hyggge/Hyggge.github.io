<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="959px" height="381px" viewBox="-0.5 -0.5 959 381" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-05-08T16:15:24.902Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.54 Safari/537.36&quot; etag=&quot;3ErWlRzOMAw0Tp6tt73G&quot; version=&quot;17.5.0&quot;&gt;&lt;diagram id=&quot;537zjuEHnSCuTAwRWwcQ&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 75 135 L 75 55 L 213.63 55" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 218.88 55 L 211.88 58.5 L 213.63 55 L 211.88 51.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="75" cy="180" rx="60" ry="45" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 180px; margin-left: 16px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b>正常用户程序</b></div></div></div></foreignObject><text x="75" y="184" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">正常用户程序</text></switch></g><path d="M 340 55 L 463.63 55" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 55 L 461.88 58.5 L 463.63 55 L 461.88 51.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="220" y="25" width="120" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 55px; margin-left: 221px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font style="font-size: 14px">except_vec3</font></b><br />(start.S)</div></div></div></foreignObject><text x="280" y="59" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">except_vec3...</text></switch></g><path d="M 590 55 L 693.63 55" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 698.88 55 L 691.88 58.5 L 693.63 55 L 691.88 51.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="470" y="25" width="120" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 55px; margin-left: 471px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 14px"><b>handle_mod</b></font><br />(genex.S)</div></div></div></foreignObject><text x="530" y="59" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">handle_mod...</text></switch></g><path d="M 860 55 L 860 45 L 935 45 L 935 335 L 741.37 335" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 736.12 335 L 743.12 331.5 L 741.37 335 L 743.12 338.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="700" y="25" width="160" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 55px; margin-left: 701px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 14px"><b>page_fault_handler</b></font><br />(traps.c)</div></div></div></foreignObject><text x="780" y="59" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">page_fault_handler...</text></switch></g><path d="M 555 335 L 391.37 335" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 386.12 335 L 393.12 331.5 L 391.37 335 L 393.12 338.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="555" y="305" width="180" height="60" rx="9" ry="9" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 335px; margin-left: 556px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font style="font-size: 14px">__asm_pgfault_handler</font></b><br />(entry.S)</div></div></div></foreignObject><text x="645" y="339" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">__asm_pgfault_handler...</text></switch></g><path d="M 265 335 L 75 335 L 75 231.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 75 226.12 L 78.5 233.12 L 75 231.37 L 71.5 233.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="265" y="305" width="120" height="60" rx="9" ry="9" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 335px; margin-left: 266px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font style="font-size: 14px">pgfault</font></b><br />(fork.c)</div></div></div></foreignObject><text x="325" y="339" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">pgfault...</text></switch></g><rect x="90" y="15" width="120" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 30px; margin-left: 150px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">触发页写入异常，<br />陷入内核，异常分发</div></div></div></foreignObject><text x="150" y="34" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">触发页写入异常，&#xa;陷入内核，异常分发</text></switch></g><rect x="350" y="15" width="110" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 30px; margin-left: 405px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">进入内核态中的页<br />写入异常处理函数</div></div></div></foreignObject><text x="405" y="34" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">进入内核态中的页&#xa;写入异常处理函数</text></switch></g><rect x="600" y="15" width="80" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 30px; margin-left: 640px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">通过子函数<br />进一步处理</div></div></div></foreignObject><text x="640" y="34" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">通过子函数&#xa;进一步处理</text></switch></g><rect x="740" y="275" width="150" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 300px; margin-left: 815px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">设置异常处理栈然后返回<br />用户态，并跳转到用户态<br />中的页写入异常处理函数</div></div></div></foreignObject><text x="815" y="304" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">设置异常处理栈然后返回用户态，并跳转到用户态中的页写入异常处理函数...</text></switch></g><rect x="395" y="275" width="160" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 300px; margin-left: 475px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">通过变量__pgfault_handler<br />获得子函数的地址，并跳转<br />到子函数，分配新的页面</div></div></div></foreignObject><text x="475" y="304" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">通过变量__pgfault_handler...</text></switch></g><rect x="125" y="295" width="140" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 310px; margin-left: 195px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">页写入异常处理完成，<br />跳转回正常的用户程序</div></div></div></foreignObject><text x="195" y="314" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">页写入异常处理完成，&#xa;跳转回正常的用户程序</text></switch></g><path d="M 175 185 L 905 186" fill="none" stroke="rgb(0, 0, 0)" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><rect x="445" y="155" width="110" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 165px; margin-left: 500px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><b><font style="font-size: 15px" color="#787878">Kernel Mode</font></b></div></div></div></foreignObject><text x="500" y="169" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Kernel Mode</text></switch></g><rect x="455" y="195" width="90" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 205px; margin-left: 500px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font size="1" color="#787878"><b style="font-size: 15px">User Mode</b></font></div></div></div></foreignObject><text x="500" y="209" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">User Mode</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>